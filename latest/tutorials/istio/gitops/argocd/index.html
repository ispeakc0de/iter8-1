<!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Iter8 is the release engineering platform for Kubernetes. SLO validation, A/B testing with business reward metrics, and progressive rollouts. Quick start in 5 mins."><meta name=author content="Srinivasan Parthasarathy"><link href=https://iter8.tools/latest/latest/tutorials/istio/gitops/argocd/ rel=canonical><link rel=icon href=../../../../images/favicon.png><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.2"><title>Argo CD + Istio - Iter8</title><link rel=stylesheet href=../../../../assets/stylesheets/main.1118c9be.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ba0d045b.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-152813895-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:site_name content=Iter8><meta property=og:title content="SLO validation, A/B testing, and progressive rollouts"><meta property=og:description content="Iter8 is the release engineering platform for Kubernetes. SLO validation, A/B testing with business reward metrics, and progressive rollouts. Quick start in 5 mins."><meta property=og:url content=https://iter8.tools><meta property=og:image content=https://iter8.tools/0.7/images/slack-image.png><!-- Twitter meta tags --><meta name=twitter:card content=summary_large_image><meta name=twitter:domain value=iter8.tools><meta name=twitter:url content=https://iter8.tools><meta name=twitter:creator content="Srinivasan Parthasarathy"><meta name=twitter:title content="SLO validation, A/B testing, and progressive rollouts"><meta name=twitter:description content="Iter8 is the release engineering platform for Kubernetes. SLO validation, A/B testing with business reward metrics, and progressive rollouts. Quick start in 5 mins."><meta name=twitter:image content=https://iter8.tools/0.7/images/slack-image.png><meta name=twitter:label1 value="K8s environments"><meta name=twitter:data1 value="Knative, KFServing, Seldon, Istio, Linkerd, ... and more"><!-- Extra stylesheets --><link rel=stylesheet href=../../../../stylesheets/main.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=indigo> <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#gitops-with-argo-cd class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title=Iter8 class="md-header__button md-logo" aria-label=Iter8 data-md-component=logo> <img src=../../../../images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Iter8 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Argo CD + Istio </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=pink data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/iter8-tools/iter8/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> iter8-tools/iter8 </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../concepts/whatisiter8/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../../../getting-started/first-experiment/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../kfserving/quick-start/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../metrics/using-metrics/ class=md-tabs__link> Metrics </a> </li> <li class=md-tabs__item> <a href=../../../../reference/experiment/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../../../contributing/overview/ class=md-tabs__link> Contributing </a> </li> <li class=md-tabs__item> <a href=../../../../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class=md-tabs__item> <a href=../../../../news/ class=md-tabs__link> News </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=Iter8 class="md-nav__button md-logo" aria-label=Iter8 data-md-component=logo> <img src=../../../../images/logo.svg alt=logo> </a> Iter8 </label> <div class=md-nav__source> <a href=https://github.com/iter8-tools/iter8/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> iter8-tools/iter8 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../concepts/whatisiter8/ class=md-nav__link> What is Iter8? </a> </li> <li class=md-nav__item> <a href=../../../../concepts/buildingblocks/ class=md-nav__link> Experiment building blocks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../getting-started/first-experiment/ class=md-nav__link> Your first experiment </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/install/ class=md-nav__link> Install Iter8 </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/help/ class=md-nav__link> Get help </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/setup-for-tutorials/ class=md-nav__link> Setup for tutorials </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> KFServing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=KFServing data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> KFServing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kfserving/quick-start/ class=md-nav__link> Quick start </a> </li> <li class=md-nav__item> <a href=../../../kfserving/platform-setup/ class=md-nav__link> Platform setup </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1_3 type=checkbox id=__nav_4_1_3> <label class=md-nav__link for=__nav_4_1_3> Testing strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Testing strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> Testing strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kfserving/testing-strategies/hybrid/ class=md-nav__link> Hybrid (A/B + SLOs) testing </a> </li> <li class=md-nav__item> <a href=../../../kfserving/testing-strategies/ab/ class=md-nav__link> A/B testing (quick start) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1_4 type=checkbox id=__nav_4_1_4> <label class=md-nav__link for=__nav_4_1_4> Rollout strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Rollout strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_1_4> <span class="md-nav__icon md-icon"></span> Rollout strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kfserving/rollout-strategies/progressive/ class=md-nav__link> Progressive traffic shift </a> </li> <li class=md-nav__item> <a href=../../../kfserving/rollout-strategies/fixed-split/ class=md-nav__link> Fixed-%-split </a> </li> <li class=md-nav__item> <a href=../../../kfserving/rollout-strategies/session-affinity/ class=md-nav__link> Session affinity </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Seldon <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Seldon data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Seldon </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seldon/quick-start/ class=md-nav__link> Quick start </a> </li> <li class=md-nav__item> <a href=../../../seldon/platform-setup/ class=md-nav__link> Platform setup </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3> Testing strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Testing strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Testing strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seldon/testing-strategies/hybrid/ class=md-nav__link> Hybrid (A/B + SLOs) testing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_4 type=checkbox id=__nav_4_2_4> <label class=md-nav__link for=__nav_4_2_4> Rollout strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Rollout strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> Rollout strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../seldon/rollout-strategies/progressive/ class=md-nav__link> Progressive traffic shift </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Knative <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Knative data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Knative </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../knative/slovalidation-helmex/ class=md-nav__link> SLO validation (Helmex) </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> Testing strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Testing strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Testing strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../knative/testing-strategies/slovalidation/ class=md-nav__link> SLO validation </a> </li> <li class=md-nav__item> <a href=../../../knative/testing-strategies/hybrid/ class=md-nav__link> Hybrid (A/B + SLOs) testing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> Rollout strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Rollout strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> Rollout strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../knative/rollout-strategies/progressive/ class=md-nav__link> Progressive traffic shift </a> </li> <li class=md-nav__item> <a href=../../../knative/rollout-strategies/fixed-split/ class=md-nav__link> Fixed-%-split </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../knative/setup-for-tutorials/ class=md-nav__link> Setup for tutorials </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4 checked> <label class=md-nav__link for=__nav_4_4> Istio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Istio data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Istio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quick-start/ class=md-nav__link> Quick start </a> </li> <li class=md-nav__item> <a href=../../platform-setup/ class=md-nav__link> Platform setup </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_3 type=checkbox id=__nav_4_4_3> <label class=md-nav__link for=__nav_4_4_3> Testing strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Testing strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_4_3> <span class="md-nav__icon md-icon"></span> Testing strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../testing-strategies/slovalidation/ class=md-nav__link> SLO validation </a> </li> <li class=md-nav__item> <a href=../../testing-strategies/conformance/ class=md-nav__link> SLO validation (single version) </a> </li> <li class=md-nav__item> <a href=../../testing-strategies/hybrid/ class=md-nav__link> Hybrid (A/B + SLOs) testing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> Rollout strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Rollout strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> Rollout strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../rollout-strategies/progressive/ class=md-nav__link> Progressive traffic shift </a> </li> <li class=md-nav__item> <a href=../../rollout-strategies/fixed-split/ class=md-nav__link> Fixed-%-split </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_5 type=checkbox id=__nav_4_4_5 checked> <label class=md-nav__link for=__nav_4_4_5> GitOps <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GitOps data-md-level=3> <label class=md-nav__title for=__nav_4_4_5> <span class="md-nav__icon md-icon"></span> GitOps </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Argo CD + Istio <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Argo CD + Istio </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-create-baseline-version class=md-nav__link> 1. Create Baseline Version </a> </li> <li class=md-nav__item> <a href=#2-create-candidate-version class=md-nav__link> 2. Create Candidate Version </a> </li> <li class=md-nav__item> <a href=#3-observe-experiment class=md-nav__link> 3. Observe experiment </a> </li> <li class=md-nav__item> <a href=#4-promote-winner class=md-nav__link> 4. Promote winner </a> </li> <li class=md-nav__item> <a href=#5-cleanup class=md-nav__link> 5. Cleanup </a> </li> <li class=md-nav__item> <a href=#additional-details class=md-nav__link> Additional details </a> <nav class=md-nav aria-label="Additional details"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-repository class=md-nav__link> Environment repository </a> </li> <li class=md-nav__item> <a href=#gitops-support-for-multiple-environments class=md-nav__link> GitOps support for multiple environments </a> </li> <li class=md-nav__item> <a href=#gitops-guarantees class=md-nav__link> GitOps Guarantees </a> </li> <li class=md-nav__item> <a href=#caveats class=md-nav__link> Caveats </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Linkerd <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linkerd data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Linkerd </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linkerd/abexperiment-helmex/ class=md-nav__link> A/B experiment (Helmex) </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Testing strategies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Testing strategies" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Testing strategies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linkerd/testing-strategies/abexperiment/ class=md-nav__link> A/B experiment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../linkerd/platform-setup/ class=md-nav__link> Platform setup </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Chaos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Chaos data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Chaos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chaos/chaos/ class=md-nav__link> Chaos Testing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_7 type=checkbox id=__nav_4_7> <label class=md-nav__link for=__nav_4_7> Openshift <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Openshift data-md-level=2> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Openshift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../openshift/openshift/ class=md-nav__link> CI/CD integration </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Metrics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Metrics data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Metrics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../metrics/using-metrics/ class=md-nav__link> Using metrics </a> </li> <li class=md-nav__item> <a href=../../../../metrics/builtin/ class=md-nav__link> Builtin metrics </a> </li> <li class=md-nav__item> <a href=../../../../metrics/custom/ class=md-nav__link> Custom metrics </a> </li> <li class=md-nav__item> <a href=../../../../metrics/mock/ class=md-nav__link> Mock metrics </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../reference/experiment/ class=md-nav__link> Experiment resource </a> </li> <li class=md-nav__item> <a href=../../../../reference/metrics/ class=md-nav__link> Metric resource </a> </li> <li class=md-nav__item> <a href=../../../../reference/helmex-schema/ class=md-nav__link> Helmex schema </a> </li> <li class=md-nav__item> <a href=../../../../reference/tasks/overview/ class=md-nav__link> Task overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_5 type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5> Task descriptions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Task descriptions" data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Task descriptions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../reference/tasks/run/ class=md-nav__link> run </a> </li> <li class=md-nav__item> <a href=../../../../reference/tasks/common-readiness/ class=md-nav__link> common/readiness </a> </li> <li class=md-nav__item> <a href=../../../../reference/tasks/metrics-collect/ class=md-nav__link> metrics/collect </a> </li> <li class=md-nav__item> <a href=../../../../reference/tasks/notification-http/ class=md-nav__link> notification/http </a> </li> <li class=md-nav__item> <a href=../../../../reference/tasks/notification-slack/ class=md-nav__link> notification/slack </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Contributing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contributing data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../contributing/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../contributing/newk8sstack/ class=md-nav__link> New K8s stack </a> </li> <li class=md-nav__item> <a href=../../../../contributing/tutorials/ class=md-nav__link> Tutorials </a> </li> <li class=md-nav__item> <a href=../../../../contributing/analytics/ class=md-nav__link> Analytics </a> </li> <li class=md-nav__item> <a href=../../../../contributing/tasks/ class=md-nav__link> Tasks </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../roadmap/ class=md-nav__link> Roadmap </a> </li> <li class=md-nav__item> <a href=../../../../news/ class=md-nav__link> News </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-create-baseline-version class=md-nav__link> 1. Create Baseline Version </a> </li> <li class=md-nav__item> <a href=#2-create-candidate-version class=md-nav__link> 2. Create Candidate Version </a> </li> <li class=md-nav__item> <a href=#3-observe-experiment class=md-nav__link> 3. Observe experiment </a> </li> <li class=md-nav__item> <a href=#4-promote-winner class=md-nav__link> 4. Promote winner </a> </li> <li class=md-nav__item> <a href=#5-cleanup class=md-nav__link> 5. Cleanup </a> </li> <li class=md-nav__item> <a href=#additional-details class=md-nav__link> Additional details </a> <nav class=md-nav aria-label="Additional details"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-repository class=md-nav__link> Environment repository </a> </li> <li class=md-nav__item> <a href=#gitops-support-for-multiple-environments class=md-nav__link> GitOps support for multiple environments </a> </li> <li class=md-nav__item> <a href=#gitops-guarantees class=md-nav__link> GitOps Guarantees </a> </li> <li class=md-nav__item> <a href=#caveats class=md-nav__link> Caveats </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/iter8-tools/iter8/edit/master/mkdocs/docs/tutorials/istio/gitops/argocd.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=gitops-with-argo-cd>GitOps with Argo CD<a class=headerlink href=#gitops-with-argo-cd title="Permanent link">&para;</a></h1> <div class="admonition tip"> <p class=admonition-title>Scenario: Iter8 Experiment + Gitops</p> <p>GitOps is an approach increasingly adopted to simplify cluster management tasks. In this approach, the desired state of one or more clusters is kept in a Git <em>environment</em> repository. A CD tool, such as Argo CD, continuously monitors this repository for changes and synchronizes any detected changes to the target clusters. In the wider context, commits to the code repository trigger a CI pipeline to, for example, lint, build, test, and push newly built images to an image repository. It then writes configuration changes to the environment repository. The CD pipeline or tool then detects these changes and synchronizes them to the target clusters. Iter8 can be used in the context of GitOps so that new versions of an application can be progressively rolled out, or even rolled back when problems are detected. To do this, configuration to create an experiment is implemented in the CI pipeline.</p> <p><img alt=CICD+Iter8 src=../../../../images/CICD%2BIter8.png></p> </div> <p>This tutorial assumes a basic understanding of Iter8. See, for example, the Istio <a href=../../quick-start/ >quick start tutorial</a>.</p> <details class=warning><summary>Setup the environment repository</summary><p>In this tutorial, a fork of the <a href=https://github.com/iter8-tools/iter8>iter8 repository</a> is used as the environment repository. To make changes to it, you will need your own <a href=https://docs.github.com/en/get-started/quickstart/fork-a-repo>fork</a> of the repository. For the purpose of this tutorial, we assume that your fork is at: <a href=https://github.com/[YOUR_ORG]/iter8>https://github.com/[YOUR_ORG]/iter8</a></p> <p>Clone the forked repository and modify it to replace the generic <code>MY_ORG</code> with <em>YOUR_ORG</em>.</p> <ul> <li><em>Clone the forked repository</em>:</li> </ul> <div class=highlight><pre><span></span><code>git clone git@github.com:kalantar/iter8.git
<span class=nb>cd</span> iter8
<span class=nb>export</span> <span class=nv>ITER8</span><span class=o>=</span><span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span>
</code></pre></div> <ul> <li><em>Modify the clone</em>:</li> </ul> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>MacOS</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>YOUR_ORG</span><span class=o>=</span>fill-in
find <span class=nv>$ITER8</span>/samples/istio/gitops -name <span class=s2>&quot;*&quot;</span> -type f <span class=p>|</span> xargs sed -i <span class=s1>&#39;&#39;</span> <span class=s2>&quot;s/MY_ORG/</span><span class=nv>$YOUR_ORG</span><span class=s2>/&quot;</span>
git commit -a -m <span class=s2>&quot;update references&quot;</span>
git push origin head
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Linux</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>YOUR_ORG</span><span class=o>=</span>fill-in
find <span class=nv>$ITER8</span>/samples/istio/gitops -name <span class=s2>&quot;*&quot;</span> -type f <span class=p>|</span> xargs sed -i <span class=s2>&quot;s/MY_ORG/</span><span class=nv>$YOUR_ORG</span><span class=s2>/&quot;</span>
git commit -a -m <span class=s2>&quot;update references&quot;</span>
git push origin head
</code></pre></div> </div> </div> </details> <details class=warning><summary>Setup a K8s cluster with Iter8, Istio and Argo CD</summary><ol> <li>Setup <a href=../../../../getting-started/setup-for-tutorials/#local-kubernetes-cluster>K8s cluster</a></li> <li><a href=../../../../getting-started/install/ >Install Iter8 in K8s cluster</a></li> <li>Get <a href=../../../../getting-started/install/#get-iter8ctl><code>iter8ctl</code></a></li> <li><a href=../../setup-for-tutorials/#install-istio>Install Istio in K8s cluster</a></li> <li><a href=../../setup-for-tutorials/#install-optional-prometheus-add-on>Install Prometheus add-on</a></li> <li><a href=../../setup-for-tutorials/#install-argo-cd>Install Argo CD in k8s cluster</a></li> <li><a href=../../setup-for-tutorials/#create-github-token>Setup a GitHub token</a> and give Iter8 permission to use it.</li> </ol> </details> <h2 id=1-create-baseline-version>1. Create Baseline Version<a class=headerlink href=#1-create-baseline-version title="Permanent link">&para;</a></h2> <p>Install the <code>bookinfo</code> application by creating an Argo CD application as follows:</p> <div class=highlight><pre><span></span><code>kubectl apply -f <span class=nv>$ITER8</span>/samples/istio/gitops/argocd-app.yaml
</code></pre></div> <p>The GitOps application defined by <code>argocd-app.yaml</code> identifies a part of your repository, <a href=https://github.com/[YOUR_ORG]/iter8>https://github.com/[YOUR_ORG]/iter8</a>, to be the environment repository. Argo CD will immediately begin to synchronize the configuration (bookinfo application config) found there. You can monitor the progress of the syncrhonization through the Argo CD UI. When the state is both <code>Healthy</code> and <code>Synced</code>, it is ready; this might take a few minutes.</p> <h2 id=2-create-candidate-version>2. Create Candidate Version<a class=headerlink href=#2-create-candidate-version title="Permanent link">&para;</a></h2> <p>When changes are merged into a code repository, a CI pipeline to, for example, lint, build, test, and push newly built images to an image repository runs. It then writes configuration changes to the environment repository indicating changes are needed to the deployed application. In this tutorial, we simulate the execution of a CI pipeline, by executing a simplified GitHub workflow: <a href=https://github.com/[YOUR_ORG]/iter8/actions/workflows/gitops-ci.yaml>https://github.com/[YOUR_ORG]/iter8/actions/workflows/gitops-ci.yaml</a></p> <p>Navigate to the workflow and click the button "Run workflow"</p> <details class=info><summary>More about GitHub workflow gitops-ci.yaml</summary><p>The "Simulate CI pipeline" creates the configuration changes that a typical CI pipeline would create when changes are made. In particular, it:</p> <ol> <li>Creates a new application configiration (by modifying a color property in a random way).</li> <li>Creates an Iter8 experiment to evaluate the new version.</li> <li>Configures load generation.</li> </ol> <p>These changes are pushed to the environment repository triggering Argo CD to deploy them.</p> </details> <p>You can use the Argo CD UI to monitor progress of the deployment. By default, Argo CD is configured to run every three minutes. If you don't want to wait, manually refresh the application so that the changes are immediately synced to the cluster.</p> <h2 id=3-observe-experiment>3. Observe experiment<a class=headerlink href=#3-observe-experiment title="Permanent link">&para;</a></h2> <p>The experiment should run for a few minutes once it starts, and you can track its progress with this command:</p> <div class=highlight><pre><span></span><code>kubectl get experiments.iter8.tools --watch
</code></pre></div> <p>More detail is available using the Iter8 CLI:</p> <div class=highlight><pre><span></span><code>iter8ctl describe
</code></pre></div> <h2 id=4-promote-winner>4. Promote winner<a class=headerlink href=#4-promote-winner title="Permanent link">&para;</a></h2> <p>Once the experiment finishes, review the pull requests on the environment repository, <a href=https://github.com/[YOUR_ORG]/iter8/pulls>https://github.com/[YOUR_ORG]/iter8/pulls</a>. Iter8 will have created a new pull request titled <code>Deploy version recommended by Iter8</code>. Changes to <code>productpage.yaml</code> capture the recommended version changes. Other changes remove artifacts specific to the experiment including the candidate version, the experiment and any load generation.</p> <p>Merge the pull request to complete the experiment. Argo CD will detect the changes and synchronize the cluster to the new desired state.</p> <details class=info><summary>How Iter8 creates a pull request</summary><p>Iter8 creates a pull request at the end of the experiment by running a GitHub workflow. Iter8 uses a [notification/http] task(../../../../reference/tasks/notification-http) to execute a GitHub workflow at the end of the experiment. This workflow creates the needed pull request.</p> </details> <h2 id=5-cleanup>5. Cleanup<a class=headerlink href=#5-cleanup title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>kubectl delete -f <span class=nv>$ITER8</span>/samples/istio/gitops/
kubectl delete ns istio-system
kubectl delete ns iter8-system
kubectl delete ns argocd
</code></pre></div> <h2 id=additional-details>Additional details<a class=headerlink href=#additional-details title="Permanent link">&para;</a></h2> <h3 id=environment-repository>Environment repository<a class=headerlink href=#environment-repository title="Permanent link">&para;</a></h3> <p>It is generally considered good practice to use different Git repositories for code and for environment configuration. In cases where the same repository is being used for both, one needs to be careful when configuring CI/CD pipeline tools so code changes can be differentiated from configuration changes, so that one doesn't inadvertently create infinite loops.</p> <p>The environment repository can be organized in many different ways. With tools such as Helm and Kustomize becoming widely used, it becomes even simpler for CI pipeline tools to update an environment repository to roll out new app versions. In this tutorial, we consciously decided to use the simplest directory structure (i.e., all YAML files within a single directory without subdirectories) without the use of any higher level templating tools. Adapting the basic directory structure to Helm/Kustomize is straight forward.</p> <p>When organizing the directory structure, one needs to keep in mind that the CI pipeline tool will be creating new resources in the environment repository to start an Iter8 experiment. And when the experiment finishes, Iter8 (specifically, Iter8 tasks) will delete the added resources and update the baseline version in the environment repository. In other words, the invariant here is the directory structure, which should stay the same before and after an experiment.</p> <h3 id=gitops-support-for-multiple-environments>GitOps support for multiple environments<a class=headerlink href=#gitops-support-for-multiple-environments title="Permanent link">&para;</a></h3> <p>Some users might use GitOps to manage multiple environments, e.g., dev, staging, prod, so changes can always propagate from environment to environment, minimizing the chance of defects from reaching the prod environment. In this case, the Iter8 GitOps task would need to be modified so that environment repository changes are done at the correct places. For example, if different environments are managed by different environment repositories, the task would need to make multiple git commits, one for each of the respositories. This could be done all within a single task, or across multiple tasks.</p> <h3 id=gitops-guarantees>GitOps Guarantees<a class=headerlink href=#gitops-guarantees title="Permanent link">&para;</a></h3> <p>Unlike other progressive delivery tools, Iter8 adheres to GitOps' guarantees by ensuring the actual state is always in sync with the desired state. App versions that fail promotion criteria will never get promoted, even if the cluster has to be recreated from scratch. This important GitOps property is often not guaranteed by other tools!</p> <h3 id=caveats>Caveats<a class=headerlink href=#caveats title="Permanent link">&para;</a></h3> <ol> <li> <p>Both CI pipeline tools and Iter8 need to write to the environment repository. If not coordinated, race conditions can occur. In this tutorial, we assume repo changes are done via pull requests, which is a common practice, so the chance of having a race condition is minimized, if not eliminated. However, other means to coordinate writes to the environment repository by different entities can be done so Iter8 can operate in fully automated pipelines.</p> </li> <li> <p>When a new app version becomes available while an experiment is still running, Iter8 will preempt the existing experiment with the new one. We currently don't support <code>test-every-commit</code> behavior by queuing new experiments, but this could be supported in the future if it turrned out to be more common than we are currently expecting.</p> </li> <li> <p>Iter8 task could fail, just like everything else. Iter8 tasks are currently <code>fail-stop</code> without retries. Please take this into account when writing Iter8 tasks and error handling code.</p> </li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <!--
  Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../../rollout-strategies/fixed-split/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Fixed-%-split </div> </div> </a> <!-- Link to next page --> <a href=../../../linkerd/abexperiment-helmex/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> A/B experiment (Helmex) </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!-- Copyright and theme information --> <div class=md-footer-copyright> <a href=https://iter8.tools/ target=_blank rel=noopener> Iter8 is Apache 2.0 licensed, 100% open, and community driven. </a> </div> <!-- Social links --> <div class=md-footer-social> <a href=https://github.com/iter8-tools/iter8 target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://join.slack.com/t/iter8-tools/shared_invite/zt-awl2se8i-L0pZCpuHntpPejxzLicbmw target=_blank rel=noopener title=join.slack.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.2b46852b.min.js></script> </body> </html>